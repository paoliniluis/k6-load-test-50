import requests, os

# Authentication

host = os.environ.get('host') if os.environ.get('host') else 'http://localhost'
port = os.environ.get('port') if os.environ.get('port') else '3001'
healthCheckEndpoint = f'{host}:{port}/api/health'
properties = f'{host}:{port}/api/session/properties'
setup = f'{host}:{port}/api/setup'
database = f'{host}:{port}/api/database'
login = f'{host}:{port}/api/session'
card = f'{host}:{port}/api/card'
dashboard = f'{host}:{port}/api/dashboard/save'

pg_sample_15 = {
    'engine':'postgres',
    'name':'pg',
    'details': {
        'host':'postgres-data1-load',
        'port':'5432',
        'dbname':'sample',
        'user':'metabase',
        'password':'metasample123',
        'schema-filters-type':'all',
        'ssl':False,
        'tunnel-enabled':False,
        'advanced-options':False
    },
    'is_full_sync':True
}

app_db = {'engine':'postgres','name':'postgres-app-db','details':{'host':'postgres-app-db-load','port':'5432','dbname':'metabase','user':'metabase','password':'mysecretpassword','schema-filters-type':'all','ssl':False,'tunnel-enabled':False,'advanced-options':False},'is_full_sync':True}

model = {"name":"Orders + People + Products + Reviews","type":"model","dataset_query":{"database":2,"type":"query","query":{"source-table":24,"joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"display":"table","description":None,"visualization_settings":{},"collection_id":None,"collection_position":1,"result_metadata":None}
modelDashboard = {"auto_apply_filters":True,"parameters":[],"param_fields":{},"more":"/auto/dashboard/model/125#show=all","transient_name":"Here's a quick look at \"Orders + People + Products + Reviews\"","creator_id":1,"related":{"zoom-out":[{"url":"/auto/dashboard/table/24","title":"Orders","description":"Some metrics we found about transactions."}]},"width":"fixed","transient_filters":None,"name":"A look at \"Orders + People + Products + Reviews\"","dashcards":[{"size_x":24,"dashboard_tab_id":None,"creator_id":1,"card":{"name":None,"display":"text","dataset_query":{},"visualization_settings":{}},"col":0,"id":"G__369094","visualization_settings":{"text":"# Summary","virtual_card":{"name":None,"display":"text","dataset_query":{},"visualization_settings":{}},"dashcard.background":False,"text.align_vertical":"bottom"},"size_y":2,"row":0,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":6,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Total Orders + People + Products + Reviews","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369011","display":"scalar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":None}},"col":0,"id":"G__369107","card_id":"G__369011","visualization_settings":{},"size_y":3,"row":2,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":6,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews added in the last 30 days","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[],"filter":["and",["time-interval",["field",289,{"temporal-unit":"month"}],-30,"day"]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369012","display":"scalar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":None}},"col":6,"id":"G__369111","card_id":"G__369012","visualization_settings":{},"size_y":3,"row":2,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":6,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Distinct User ID","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["distinct",["field",284,{"source-field":280}]]],"breakout":[],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369014","display":"scalar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["distinct"],"graph.dimensions":None}},"col":12,"id":"G__369115","card_id":"G__369014","visualization_settings":{},"size_y":3,"row":2,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":24,"dashboard_tab_id":None,"creator_id":1,"card":{"name":None,"display":"text","dataset_query":{},"visualization_settings":{}},"col":0,"id":"G__369117","visualization_settings":{"text":"# Where these Orders + People + Products + Reviews are","virtual_card":{"name":None,"display":"text","dataset_query":{},"visualization_settings":{}},"dashcard.background":False,"text.align_vertical":"bottom"},"size_y":2,"row":5,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews per state","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",288,None]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369036","display":"map","visualization_settings":{"map.type":"region","map.region":"us_states","graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["state"]}},"col":0,"id":"G__369122","card_id":"G__369036","visualization_settings":{},"size_y":6,"row":7,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews by coordinates","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",290,None],["field",293,None]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369038","display":"map","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["longitude","latitude"]}},"col":12,"id":"G__369126","card_id":"G__369038","visualization_settings":{},"size_y":6,"row":7,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":24,"dashboard_tab_id":None,"creator_id":1,"card":{"name":None,"display":"text","dataset_query":{},"visualization_settings":{}},"col":0,"id":"G__369129","visualization_settings":{"text":"# These Orders + People + Products + Reviews across time","virtual_card":{"name":None,"display":"text","dataset_query":{},"visualization_settings":{}},"dashcard.background":False,"text.align_vertical":"bottom"},"size_y":2,"row":13,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"New Orders + People + Products + Reviews over time","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",297,{"temporal-unit":"month"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369039","display":"line","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at_3"],"graph.colors":["#F9D45C"]}},"col":0,"id":"G__369132","card_id":"G__369039","visualization_settings":{},"size_y":6,"row":15,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"New Orders + People + Products + Reviews over time","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",305,{"temporal-unit":"month"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369040","display":"line","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at_4"],"graph.colors":["#F9D45C"]}},"col":12,"id":"G__369136","card_id":"G__369040","visualization_settings":{},"size_y":6,"row":15,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"New Orders + People + Products + Reviews over time","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",279,{"temporal-unit":"month"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369041","display":"line","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at"],"graph.colors":["#F9D45C"]}},"col":0,"id":"G__369141","card_id":"G__369041","visualization_settings":{},"size_y":6,"row":21,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"New Orders + People + Products + Reviews over time","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",289,{"temporal-unit":"month"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369043","display":"line","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at_2"],"graph.colors":["#F9D45C"]}},"col":12,"id":"G__369145","card_id":"G__369043","visualization_settings":{},"size_y":6,"row":21,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Timestamp by day of the week","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",286,{"temporal-unit":"day-of-week"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369055","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["birth_date"],"graph.colors":["#F9D45C"],"graph.x_axis.title_text":"Timestamp"}},"col":0,"id":"G__369148","card_id":"G__369055","visualization_settings":{},"size_y":6,"row":27,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Weekdays when Orders + People + Products + Reviews were added","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",297,{"temporal-unit":"day-of-week"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369060","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at_3"],"graph.colors":["#F2A86F"],"graph.x_axis.title_text":"Products → Created At by day of the week"}},"col":12,"id":"G__369152","card_id":"G__369060","visualization_settings":{},"size_y":6,"row":27,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Weekdays when Orders + People + Products + Reviews were added","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",305,{"temporal-unit":"day-of-week"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369061","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at_4"],"graph.colors":["#A989C5"],"graph.x_axis.title_text":"Reviews → Created At by day of the week"}},"col":0,"id":"G__369155","card_id":"G__369061","visualization_settings":{},"size_y":6,"row":33,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Weekdays when Orders + People + Products + Reviews were added","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",279,{"temporal-unit":"day-of-week"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369063","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at"],"graph.colors":["#F9D45C"],"graph.x_axis.title_text":"Created At by day of the week"}},"col":12,"id":"G__369158","card_id":"G__369063","visualization_settings":{},"size_y":6,"row":33,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Weekdays when Orders + People + Products + Reviews were added","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",289,{"temporal-unit":"day-of-week"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369064","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at_2"],"graph.colors":["#7172AD"],"graph.x_axis.title_text":"People - User → Created At by day of the week"}},"col":0,"id":"G__369162","card_id":"G__369064","visualization_settings":{},"size_y":6,"row":39,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Hours when Orders + People + Products + Reviews were added","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",297,{"temporal-unit":"hour-of-day"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369066","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at_3"],"graph.colors":["#F2A86F"],"graph.x_axis.title_text":"Products → Created At by hour of the day"}},"col":12,"id":"G__369165","card_id":"G__369066","visualization_settings":{},"size_y":6,"row":39,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Hours when Orders + People + Products + Reviews were added","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",305,{"temporal-unit":"hour-of-day"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369067","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["created_at_4"],"graph.colors":["#A989C5"],"graph.x_axis.title_text":"Reviews → Created At by hour of the day"}},"col":0,"id":"G__369169","card_id":"G__369067","visualization_settings":{},"size_y":6,"row":45,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Discount over time","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["sum",["field",283,None]],["avg",["field",283,None]]],"breakout":[["field",297,{"temporal-unit":"month"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369049","display":"line","visualization_settings":{"graph.series_labels":[None,None],"graph.metrics":["sum","avg"],"graph.dimensions":["created_at_3"],"graph.colors":["#98D9D9","#F2A86F"]}},"col":12,"id":"G__369173","card_id":"G__369049","visualization_settings":{},"size_y":6,"row":45,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Discount over time","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["sum",["field",283,None]],["avg",["field",283,None]]],"breakout":[["field",305,{"temporal-unit":"month"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369051","display":"line","visualization_settings":{"graph.series_labels":[None,None],"graph.metrics":["sum","avg"],"graph.dimensions":["created_at_4"],"graph.colors":["#98D9D9","#F2A86F"]}},"col":0,"id":"G__369178","card_id":"G__369051","visualization_settings":{},"size_y":6,"row":51,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Discount over time","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["sum",["field",283,None]],["avg",["field",283,None]]],"breakout":[["field",279,{"temporal-unit":"month"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369052","display":"line","visualization_settings":{"graph.series_labels":[None,None],"graph.metrics":["sum","avg"],"graph.dimensions":["created_at"],"graph.colors":["#98D9D9","#F2A86F"]}},"col":12,"id":"G__369182","card_id":"G__369052","visualization_settings":{},"size_y":6,"row":51,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Discount over time","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["sum",["field",283,None]],["avg",["field",283,None]]],"breakout":[["field",289,{"temporal-unit":"month"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369054","display":"line","visualization_settings":{"graph.series_labels":[None,None],"graph.metrics":["sum","avg"],"graph.dimensions":["created_at_2"],"graph.colors":["#98D9D9","#F2A86F"]}},"col":0,"id":"G__369185","card_id":"G__369054","visualization_settings":{},"size_y":6,"row":57,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Discount over time","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["sum",["field",283,None]],["avg",["field",283,None]]],"breakout":[["field",286,{"temporal-unit":"year"}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369047","display":"line","visualization_settings":{"graph.series_labels":[None,None],"graph.metrics":["sum","avg"],"graph.dimensions":["birth_date"],"graph.colors":["#98D9D9","#F2A86F"]}},"col":12,"id":"G__369189","card_id":"G__369047","visualization_settings":{},"size_y":6,"row":57,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":24,"dashboard_tab_id":None,"creator_id":1,"card":{"name":None,"display":"text","dataset_query":{},"visualization_settings":{}},"col":0,"id":"G__369191","visualization_settings":{"text":"# How these Orders + People + Products + Reviews are distributed","virtual_card":{"name":None,"display":"text","dataset_query":{},"visualization_settings":{}},"dashcard.background":False,"text.align_vertical":"bottom"},"size_y":2,"row":63,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews by Tax","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",275,{"binning":{"strategy":"default"}}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369016","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["tax"],"graph.colors":["#509EE3"]}},"col":0,"id":"G__369194","card_id":"G__369016","visualization_settings":{},"size_y":6,"row":65,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews by Products → Rating","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",300,{"binning":{"strategy":"default"}}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369020","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["rating"],"graph.colors":["#98D9D9"]}},"col":12,"id":"G__369198","card_id":"G__369020","visualization_settings":{},"size_y":6,"row":65,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews by Quantity","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",281,{"binning":{"strategy":"default"}}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369022","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["quantity"],"graph.colors":["#88BF4D"]}},"col":0,"id":"G__369201","card_id":"G__369022","visualization_settings":{},"size_y":6,"row":71,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews by Reviews → Rating","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",309,{"binning":{"strategy":"default"}}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369024","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["rating_2"],"graph.colors":["#88BF4D"]}},"col":12,"id":"G__369205","card_id":"G__369024","visualization_settings":{},"size_y":6,"row":71,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews by Products → Price","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",304,{"binning":{"strategy":"default"}}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369026","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["price"],"graph.colors":["#EF8C8C"]}},"col":0,"id":"G__369209","card_id":"G__369026","visualization_settings":{},"size_y":6,"row":77,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews by Subtotal","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",276,{"binning":{"strategy":"default"}}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369028","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["subtotal"],"graph.colors":["#EF8C8C"]}},"col":12,"id":"G__369212","card_id":"G__369028","visualization_settings":{},"size_y":6,"row":77,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews by Total","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",277,{"binning":{"strategy":"default"}}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369030","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["total"],"graph.colors":["#98D9D9"]}},"col":0,"id":"G__369216","card_id":"G__369030","visualization_settings":{},"size_y":6,"row":83,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews by Discount","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",283,{"binning":{"strategy":"default"}}]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369032","display":"bar","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["discount"],"graph.colors":["#509EE3"]}},"col":12,"id":"G__369220","card_id":"G__369032","visualization_settings":{},"size_y":6,"row":83,"dashboard_id":"/auto/dashboard/model/125?"},{"size_x":12,"dashboard_tab_id":None,"card":{"description":None,"table_id":24,"can_run_adhoc_query":True,"database_id":2,"collection_id":None,"query_type":"query","name":"Orders + People + Products + Reviews per Products → Category","creator_id":1,"dataset_query":{"database":2,"type":"query","query":{"aggregation":[["count"]],"breakout":[["field",298,None]],"source-table":"card__125","joins":[{"fields":"all","strategy":"left-join","alias":"People - User","condition":["=",["field",280,{"base-type":"type/Integer"}],["field",284,{"base-type":"type/BigInteger","join-alias":"People - User"}]],"source-table":26},{"fields":"all","strategy":"left-join","alias":"Products","condition":["=",["field",278,{"base-type":"type/Integer"}],["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}]],"source-table":22},{"fields":"all","strategy":"left-join","alias":"Reviews","condition":["=",["field",301,{"base-type":"type/BigInteger","join-alias":"Products"}],["field",307,{"base-type":"type/Integer","join-alias":"Reviews"}]],"source-table":23}]}},"id":"G__369034","display":"row","visualization_settings":{"graph.series_labels":[None],"graph.metrics":["count"],"graph.dimensions":["category"],"graph.colors":["#A989C5"]}},"col":0,"id":"G__369224","card_id":"G__369034","visualization_settings":{},"size_y":8,"row":89,"dashboard_id":"/auto/dashboard/model/125?"}],"description":"An overview of \"Orders + People + Products + Reviews\" and how it's distributed across time, place, and categories."}

dbs = [pg_sample_15, app_db]

def health():
    response = requests.get(healthCheckEndpoint, verify=False)
    if response.json()['status'] == 'ok':
        return 'healthy'
    else:
        health()

if health() == 'healthy' and os.environ.get('retry') == 'yes':
    loginPayload = { 'username': 'a@b.com', 'password': 'metabot1' }
    session = requests.Session()
    sessionToken = session.post(login, verify=False, json=loginPayload)
    for i in range(int(os.environ.get('dbs'))):
        db = dbs[i]
        session.post(database, verify=False, json=db)
    session.delete(f'{database}/1')

if health() == 'healthy' and os.environ.get('retry') is None:
    session = requests.Session()
    token = session.get(properties, verify=False).json()['setup-token']
    setupPayload = {
        'token':f'{token}',
        'user':{
            'first_name':'a',
            'last_name':'b',
            'email':'a@b.com',
            'site_name':'metabot1',
            'password':'metabot1',
            'password_confirm':'metabot1'
        },
        'database':None,
        'invite':None,
        'prefs':{
            'site_name':'metabot1',
            'site_locale':'en',
            'allow_tracking':False
        }
    }
    try:
        sessionToken = session.post(setup, verify=False, json=setupPayload).json()['id']

        for i in range(int(os.environ.get('dbs'))):
            db = dbs[i]
            session.post(database, verify=False, json=db)
        
        # session.post(card, data = model)
        # session.post(dashboard, data = modelDashboard)

        # delete the sample DB
        session.delete(f'{database}/1')

    except:
        exit()